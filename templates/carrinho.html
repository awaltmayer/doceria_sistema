{% extends "layout.html" %}

{% block title %}Carrinho de Compras - Doceria{% endblock %}

{% block content %}
<div class="shop-container">
    <header class="shop-header">
        <h1>Seu Carrinho de Compras</h1>
        <div class="header-links">
            <a href="{{ url_for('cardapio') }}">Voltar ao Cardápio</a>
            <a href="{{ url_for('logout') }}">Logout</a>
        </div>
    </header>

    <div class="cart-container">
        {% if itens_carrinho %}
            <table class="cart-table">
                <thead>
                    <tr>
                        <th>Produto</th>
                        <th>Preço Unitário</th>
                        <th>Quantidade</th>
                        <th>Subtotal</th>
                    </tr>
                </thead>
                <tbody>
                    {% for item in itens_carrinho %}
                    <tr>
                        <td>{{ item.nome }}</td>
                        <td>R$ {{ "%.2f"|format(item.preco) }}</td>
                        <td>{{ item.quantidade }}</td>
                        <td>R$ {{ "%.2f"|format(item.subtotal) }}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>

            <div class="cart-summary">
                <h2>Total: R$ {{ "%.2f"|format(total_geral) }}</h2>
                <form method="POST" action="{{ url_for('checkout') }}">
                    <button type="submit" class="btn">Finalizar Compra</button>
                </form>
            </div>
        {% else %}
            <div class="cart-empty">
                <p>O seu carrinho está vazio.</p>
                <a href="{{ url_for('cardapio') }}" class="btn">Começar a comprar</a>
            </div>
        {% endif %}
    </div>
</div>
{% endblock %}

