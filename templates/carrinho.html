{% extends "layout.html" %}

{% block title %}Carrinho - Doceria{% endblock %}

{% block content %}
<div class="page-container">
    <header class="page-header">
        <h1>Seu Carrinho de Compras</h1>
        <nav>
            <a href="{{ url_for('cardapio') }}" class="button secondary">Voltar ao Cardápio</a>
            <a href="{{ url_for('logout') }}" class="button secondary">Logout</a>
        </nav>
    </header>

    {% if itens_carrinho %}
        <div class="carrinho-container">
            <ul class="carrinho-lista">
                {% for item in itens_carrinho %}
                <li>
                    <span class="item-nome">{{ item.nome }}</span>
                    <span class="item-detalhes">{{ item.quantidade }} x R$ {{ "%.2f"|format(item.preco) }}</span>
                    <span class="item-subtotal">R$ {{ "%.2f"|format(item.subtotal) }}</span>
                </li>
                {% endfor %}
            </ul>
            <div class="carrinho-total">
                <strong>Total: R$ {{ "%.2f"|format(total_geral) }}</strong>
            </div>

            <form method="POST" action="{{ url_for('checkout') }}" class="checkout-form">
                 <p>Tudo certo? Finalize seu pedido!</p>
                <button type="submit" class="button">Finalizar Compra</button>
            </form>
        </div>
    {% else %}
        <p class="empty-message">Seu carrinho está vazio.</p>
    {% endif %}
</div>
{% endblock %}

