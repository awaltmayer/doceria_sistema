{% extends "layout.html" %}

{% block title %}Cardápio - Doceria{% endblock %}

{% block content %}
<div class="page-container">
    <header class="page-header">
        <h1>Nosso Cardápio</h1>
        <p>Bem-vindo, {{ session['username'] }}!</p>
        <nav>
            <a href="{{ url_for('ver_carrinho') }}" class="button">Ver Carrinho</a>
            <a href="{{ url_for('logout') }}" class="button secondary">Logout</a>
        </nav>
    </header>

    <div class="trufas-grid">
        {% for trufa in trufas %}
        <div class="trufa-card">
            <h3>{{ trufa.nome }}</h3>
            <p class="descricao">{{ trufa.descricao }}</p>
            <p class="preco">R$ {{ "%.2f"|format(trufa.preco) }}</p>
            <form method="POST" action="{{ url_for('adicionar_carrinho') }}">
                <input type="hidden" name="trufa_id" value="{{ trufa.id }}">
                <div class="form-group-inline">
                    <label for="quantidade-{{ trufa.id }}">Qtd:</label>
                    <input type="number" name="quantidade" id="quantidade-{{ trufa.id }}" value="{{ session.get('carrinho', {}).get(trufa.id|string, 0) }}" min="0">
                    <button type="submit">Atualizar</button>
                </div>
            </form>
        </div>
        {% endfor %}
    </div>
</div>
{% endblock %}

