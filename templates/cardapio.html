{% extends "layout.html" %}

{% block title %}Cardápio - Doceria{% endblock %}

{% block content %}
<div class="shop-container">
    <header class="shop-header">
        <h1>Nosso Cardápio</h1>
        <div class="header-links">
            <span>Olá, {{ session.username }}!</span>
            <a href="{{ url_for('ver_carrinho') }}">Ver Carrinho</a>
            <a href="{{ url_for('logout') }}">Logout</a>
        </div>
    </header>

    <div class="trufas-grid">
        {% for trufa in trufas %}
        <div class="trufa-card">
            <h3>{{ trufa.nome }}</h3>
            <p class="descricao">{{ trufa.descricao }}</p>
            <p class="preco">R$ {{ "%.2f"|format(trufa.preco) }}</p>
            <form method="POST" action="{{ url_for('adicionar_carrinho') }}">
                <input type="hidden" name="trufa_id" value="{{ trufa.id }}">
                <div class="form-group-inline">
                    <label for="quantidade-{{ trufa.id }}">Quantidade:</label>
                    <input type="number" id="quantidade-{{ trufa.id }}" name="quantidade" value="{{ session.carrinho.get(trufa.id|string, 0) }}" min="0" class="quantidade-input">
                </div>
                <button type="submit" class="btn btn-small">Atualizar</button>
            </form>
        </div>
        {% endfor %}
    </div>
</div>
{% endblock %}

